## 第四章 网络安全

### 4.1网络安全基础

#### 4.1.1 TCP/IP 协议架构

- TCP/IP开放模型
  - 物理和数据链路层
  - 网络层
  - 传输层
  - 应用层
- OSI/RM模型
  - 应用层
  - 表示层
  - 会话层
  - 传输层
  - 网络层
  - 数据链路层
  - 物理层

#### 4.1.2网络协议

- 数据链路层协议

  - ARP协议（地址解析）
    - 通过ip识别数据包发送的源主机和目的主机
    - MAC地址+数据帧
    - 实现ip地址与主机的MAC地址转换
    - ip与MAC之间的映射
    - 地址解析是在一个物理网络内的
  - RARP协议
    - 逆向地址转换协议
    - MAC转为ip

- 网络层协议

  - IP协议：实现跨越不同网络之间的主机通信

    - IP地址：32位的二进制IP地址，每8个一组转化为十进制数

      ​               前半部分为网络号，后半部分为主机号

    - IP地址分类：

      |          类别           |            IP             | 开头 | 网络号长度 | 主机号长度 |  含有主机个数  |
      | :---------------------: | :-----------------------: | :--: | :--------: | :--------: | :------------: |
      |            A            |  0.0.0.0~127.255.255.255  |  0   |     7      |     24     |  2的24次方-2   |
      | B（2的14次方个B类网络） | 128.0.0.0~191.255.255.255 |  10  |     14     |     16     |  2的16次方-2   |
      | C（2的21次方个C类网络） | 192.0.0.0~233.255.255.255 | 110  |     21     |     8      | 2的8次方-2/254 |
      |            D            | 234.0.0.0~239.255.255.255 | 1110 |     /      |     /      |       /        |
      |            E            | 240.0.0.0~255.255.255.255 | 1111 |     /      |     /      |       /        |

    - 其他IP地址：

      对于内网的网络设定，私有IP地址

      1. A类：10.0.0.0~10.255.255.255
      2. B类：172.16.0.0~172.31.255.255
      3. C类：192.168.0.0~192.168.255.255

    - IP数据包格式
    
    <img src="https://raw.githubusercontent.com/GeniusKangaroo/NCRE3_CyberSecurityTechnology/main/e56b9113abd9c2fe9ce83ff0c814734.jpg" style="zoom: 25%;" />
    
    
    
  - ICMP协议
  
    - 网络异常状态的监听和检测
    - TCP/IP网络中发送出错和控制消息
    - 错误侦测和反馈机制
  
- 传输层协议

  - TCP协议：

    - 头部格式：
      - tcp数据包由头部和数据两部分组成
      - 头部前20字节是固定的后面均可变
    - 三次握手：
      1. 源主机—>目标主机发送ACK为1的应答包，数据包中设置了源和目标的IP和port；SEQ=X
      2. 目标主机自动应答，返回数据包，表示同意建立链接；ACK=1，SYN=1，SEQ=Y，确认号=X+1
      3. 源主机—>目标主机发送ACK为1的应答包，确认建立链接；SEQ=X，确认号=Y+1

  - UDP协议：

    - 无连接的传输协议

- 应用层协议

  - HTTP：
    - 超文本传输协议
    - port：80
    - 先建立TCP连接
    - GET/POST提交数据
  - SMTP&POP3：
    - 简单邮件传输协议
    - port：25
    - 基于TCP协议
    - pop3是应用最广泛的邮件访问协议
  
- DNS：域名解析



### 4.2网络安全威胁技术

#### 4.2.1扫描技术
